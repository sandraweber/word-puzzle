/*global require,console*/
/*jslint node: true */
'use strict';

var domain = require('puzzle-domain');

module.exports = function(router) {
	
	router.get('/puzzle/score', function (req, res) {
		domain.getScore(function (puzzles) {
			res.json(puzzles);
		});
	});

	router.post('/puzzle', function (req, res) {
		var user = req.user
		domain.addPuzzle(user, function (puzzleId) {
			res.json({ id: puzzleId });
		});
	});	

	router.post('/puzzle/:puzzleId/word', function (req, res) {
		var puzzle_id = req.params.puzzle_id;
		var word = req.word;

		domain.addWordToPuzzle(puzzle_id, word, function (puzzle) {
			res.json(puzzle);
		});
	});

	router.get('/puzzle/:puzzleId', function (req, res) {
		var puzzle_id = req.params.puzzle_id;

		domain.getPuzzle(puzzle_id, function (puzzle) {
			res.json(puzzle);
		});
	});

};
