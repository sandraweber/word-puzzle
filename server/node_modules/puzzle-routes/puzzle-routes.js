/*global require,console*/
/*jslint node: true */
'use strict';

var domain = require('puzzle-domain');

module.exports = function(router) {
	
	router.get('/puzzle', function (req, res) {
        // TODO restrict to top 20 or something
        domain.getAll(function (puzzles) {
			res.json(puzzles);
		});
	});

	router.post('/puzzle', function (req, res) {
		var puzzle = req.body;
		domain.createPuzzle(puzzle, function (puzzle) {
			res.json(puzzle);
		});
	});

	router.get('/puzzle/:puzzleId', function (req, res) {
		var puzzleId = req.params.puzzleId;
        console.log('Loading puzzle with id '+puzzleId)

		domain.getPuzzle(puzzleId, function (puzzle) {
			res.json(puzzle);
		});
	});

};
