var db = require('mongoskin').db('mongodb://localhost:27017/puzzle');


exports.getScore = function (callback) {
    db.collection('puzzles').find().toArray(function(err, result) {
        if (err) throw err;
        callback(result);
    });
	// TODO restrict to top 20 or something
};

exports.createPuzzle = function (puzzle, callback) {
    db.collection('puzzles').insert(puzzle, function(err) {
        if (err) throw err;
        console.log('Puzzle ' + puzzle._id + ' was inserted!');
        callback(puzzle);
    });
	
};

function getPuzzle(puzzleId, callback) {
	db.collection('puzzles').findOne({ _id : puzzleId }, function(err, result) {
        if (err) throw err;
        callback(result);
    });
};
exports.getPuzzle = getPuzzle;